<h2 class="section-title">Architecture & Design Patterns</h2>


<div class="learning-objectives">
  <h3>Learning Objectives</h3>
  <ul>
    <li>Understand MCP's client-server architecture</li>
    <li>Learn about transport protocols and message formats</li>
    <li>Explore security and authentication patterns</li>
  </ul>
</div>

<h3>Client-Server Model</h3>
<p>MCP follows a client-server architecture where AI assistants (clients) connect to MCP servers that provide
  resources and tools. Communication is bidirectional and follows a request-response pattern with optional
  streaming capabilities.</p>

<div class="diagram-container">
  <h4>Interactive Communication Flow</h4>
  <svg class="communication-diagram" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="800" height="400" fill="#ffffff" rx="10" />

    <!-- Client Side -->
    <g class="client-side">
      <rect x="50" y="150" width="150" height="100" rx="10" fill="#667eea" stroke="#5a67d8" stroke-width="2"
        class="client-box" />
      <text x="125" y="185" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14"
        font-weight="bold">MCP CLIENT</text>
      <text x="125" y="205" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12">(AI
        Assistant)</text>
      <text x="125" y="225" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10">Claude,
        GPT, etc.</text>
    </g>

    <!-- Server Side -->
    <g class="server-side">
      <rect x="600" y="150" width="150" height="100" rx="10" fill="#48bb78" stroke="#38a169" stroke-width="2"
        class="server-box" />
      <text x="675" y="185" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14"
        font-weight="bold">MCP SERVER</text>
      <text x="675" y="205" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12">(Data
        Provider)</text>
      <text x="675" y="225" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10">Files,
        APIs, DBs</text>
    </g>

    <!-- Communication Paths -->
    <g class="communication-paths">
      <!-- Request path -->
      <path d="M 200 180 Q 400 120 600 180" stroke="#667eea" stroke-width="3" fill="none"
        class="message-path request-path" id="requestPath" />
      <path d="M 200 180 Q 400 120 600 180" stroke="#667eea" stroke-width="3" fill="none" stroke-dasharray="0"
        opacity="0.2" />

      <!-- Response path -->
      <path d="M 600 220 Q 400 280 200 220" stroke="#48bb78" stroke-width="3" fill="none"
        class="message-path response-path" id="responsePath" />
      <path d="M 600 220 Q 400 280 200 220" stroke="#48bb78" stroke-width="3" fill="none" stroke-dasharray="0"
        opacity="0.2" />
    </g>

    <!-- Message indicators -->
    <g class="message-indicators">
      <!-- Request dot -->
      <circle cx="200" cy="180" r="6" fill="#667eea" class="message-dot request-dot" />

      <!-- Response dot -->
      <circle cx="600" cy="220" r="6" fill="#48bb78" class="message-dot response-dot" />
    </g>

    <!-- Message text -->
    <g class="message-labels">
      <text x="400" y="110" text-anchor="middle" fill="#667eea" class="message-text request-text" font-weight="bold">
        JSON-RPC Request
      </text>
      <text x="400" y="125" text-anchor="middle" fill="#667eea" class="message-text request-details" font-size="10">
        {"method": "tools/call", "params": {...}}
      </text>

      <text x="400" y="300" text-anchor="middle" fill="#48bb78" class="message-text response-text" font-weight="bold">
        JSON-RPC Response
      </text>
      <text x="400" y="315" text-anchor="middle" fill="#48bb78" class="message-text response-details" font-size="10">
        {"result": {...}, "id": 1}
      </text>
    </g>

    <!-- Transport Protocol Labels -->
    <g class="transport-labels">
      <text x="400" y="50" text-anchor="middle" fill="#4a5568" font-family="Arial, sans-serif" font-size="16"
        font-weight="bold">
        Transport: HTTP/HTTPS, WebSocket, or stdio
      </text>
    </g>

    <!-- Step indicators -->
    <g class="step-indicators">
      <circle cx="250" cy="180" r="12" fill="#667eea" stroke="white" stroke-width="2" class="step-circle step-1"
        opacity="0" />
      <text x="250" y="185" text-anchor="middle" fill="white" font-size="10" font-weight="bold" class="step-text step-1"
        opacity="0">1</text>

      <circle cx="400" cy="150" r="12" fill="#ed8936" stroke="white" stroke-width="2" class="step-circle step-2"
        opacity="0" />
      <text x="400" y="155" text-anchor="middle" fill="white" font-size="10" font-weight="bold" class="step-text step-2"
        opacity="0">2</text>

      <circle cx="550" cy="220" r="12" fill="#48bb78" stroke="white" stroke-width="2" class="step-circle step-3"
        opacity="0" />
      <text x="550" y="225" text-anchor="middle" fill="white" font-size="10" font-weight="bold" class="step-text step-3"
        opacity="0">3</text>

      <circle cx="350" cy="250" r="12" fill="#9f7aea" stroke="white" stroke-width="2" class="step-circle step-4"
        opacity="0" />
      <text x="350" y="255" text-anchor="middle" fill="white" font-size="10" font-weight="bold" class="step-text step-4"
        opacity="0">4</text>
    </g>
  </svg>

  <div class="diagram-controls">
    <button class="diagram-btn" id="toggleAnimation">▶ Play Animation</button>
    <button class="diagram-btn" id="resetAnimation">↻ Reset</button>
  </div>
</div>

<div class="highlight-box">
  <h3>Transport Protocols</h3>
  <p><strong>HTTP/HTTPS:</strong> Standard web protocols for RESTful interactions</p>
  <p><strong>WebSocket:</strong> Real-time bidirectional communication</p>
  <p><strong>stdio:</strong> Standard input/output for local process communication</p>
</div>

<h3>Message Format</h3>
<p>MCP uses JSON-RPC 2.0 as its message format, providing a standardized way to encode requests, responses, and
  notifications.</p>

<div class="code-block">
  <div class="ace-editor" id="editor2">{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "resources/list",
  "params": {
    "cursor": null
  }
}

// Response
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "resources": [
      {
        "uri": "file://documents/readme.txt",
        "name": "README",
        "mimeType": "text/plain"
      }
    ]
  }
}
  </div>
</div>

<h3>Security Considerations</h3>
<ul>
  <li><strong>Authentication:</strong> API keys, OAuth 2.0, or custom auth schemes</li>
  <li><strong>Authorization:</strong> Resource-level and operation-level permissions</li>
  <li><strong>Encryption:</strong> TLS for transport security</li>
  <li><strong>Rate Limiting:</strong> Prevent abuse and ensure fair usage</li>
</ul>

<button class="btn" onclick="markSectionComplete('architecture')">Mark Complete</button>